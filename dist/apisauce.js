"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var _default23=_interopDefault(require("ramda/src/partial")),_default22=_interopDefault(require("ramda/src/equals")),_default21=_interopDefault(require("ramda/src/pipeP")),_default20=_interopDefault(require("ramda/src/keys")),_default19=_interopDefault(require("ramda/src/dissoc")),_default18=_interopDefault(require("ramda/src/merge")),_default17=_interopDefault(require("ramda/src/prop")),_default16=_interopDefault(require("ramda/src/always")),_default15=_interopDefault(require("ramda/src/ifElse")),_default14=_interopDefault(require("ramda/src/propSatisfies")),_default13=_interopDefault(require("ramda/src/propIs")),_default12=_interopDefault(require("ramda/src/has")),_default11=_interopDefault(require("ramda/src/complement")),_default10=_interopDefault(require("ramda/src/isEmpty")),_default9=_interopDefault(require("ramda/src/anyPass")),_default8=_interopDefault(require("ramda/src/contains")),_default7=_interopDefault(require("ramda/src/gte")),_default6=_interopDefault(require("ramda/src/curry")),_default5=_interopDefault(require("ramda/src/T")),_default4=_interopDefault(require("ramda/src/is")),_default3=_interopDefault(require("ramda/src/identity")),_default2=_interopDefault(require("ramda/src/isNil")),_default=_interopDefault(require("ramda/src/cond")),axios=_interopDefault(require("axios")),__assign=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},__awaiter=function(e,t,r,a){return new(r||(r=Promise))(function(n,u){function R(e){try{_(a.next(e))}catch(e){u(e)}}function i(e){try{_(a.throw(e))}catch(e){u(e)}}function _(e){e.done?n(e.value):new r(function(t){t(e.value)}).then(R,i)}_((a=a.apply(e,t||[])).next())})},__generator=function(e,t){function r(e){return function(t){return a([e,t])}}function a(r){if(n)throw new TypeError("Generator is already executing.");for(;_;)try{if(n=1,u&&(R=u[2&r[0]?"return":r[0]?"throw":"next"])&&!(R=R.call(u,r[1])).done)return R;switch(u=0,R&&(r=[0,R.value]),r[0]){case 0:case 1:R=r;break;case 4:return _.label++,{value:r[1],done:!1};case 5:_.label++,u=r[1],r=[0];continue;case 7:r=_.ops.pop(),_.trys.pop();continue;default:if(R=_.trys,!(R=R.length>0&&R[R.length-1])&&(6===r[0]||2===r[0])){_=0;continue}if(3===r[0]&&(!R||r[1]>R[0]&&r[1]<R[3])){_.label=r[1];break}if(6===r[0]&&_.label<R[1]){_.label=R[1],R=r;break}if(R&&_.label<R[2]){_.label=R[2],_.ops.push(r);break}R[2]&&_.ops.pop(),_.trys.pop();continue}r=t.call(e,_)}catch(e){r=[6,e],u=0}finally{n=R=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var n,u,R,i,_={label:0,sent:function(){if(1&R[0])throw R[1];return R[1]},trys:[],ops:[]};return i={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i},_this=void 0,toNumber=_default([[_default2,_default3],[_default4(Number),_default3],[_default5,function(e){return Number(e)}]]),isWithin=_default6(function(e,t,r){var a=_default4(Number);return a(e)&&a(t)&&a(r)&&_default7(r,e)&&_default7(t,r)}),isInvalidConfig=_default9([_default2,_default10,_default11(_default12("baseURL")),_default11(_default13(String,"baseURL")),_default14(_default10,"baseURL")]),isPromise=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then},DEFAULT_HEADERS={Accept:"application/json","Content-Type":"application/json"},DEFAULT_CONFIG={timeout:0},NONE=null,CLIENT_ERROR="CLIENT_ERROR",SERVER_ERROR="SERVER_ERROR",TIMEOUT_ERROR="TIMEOUT_ERROR",CONNECTION_ERROR="CONNECTION_ERROR",NETWORK_ERROR="NETWORK_ERROR",UNKNOWN_ERROR="UNKNOWN_ERROR",CANCEL_ERROR="CANCEL_ERROR",TIMEOUT_ERROR_CODE="ECONNABORTED",NODEJS_CONNECTION_ERROR_CODE_NF="ENOTFOUND",NODEJS_CONNECTION_ERROR_CODE_REF="ECONNREFUSED",NODEJS_CONNECTION_ERROR_CODE_RES="ECONNRESET",in200s=isWithin(200,299),in400s=isWithin(400,499),in500s=isWithin(500,599),statusNil=_default15(_default2,_default16(void 0),_default17("status")),create=function(e){if(isInvalidConfig(e))throw new Error("config must have a baseURL");var t=_default18(DEFAULT_HEADERS,e.headers||{}),r=_default18(DEFAULT_CONFIG,_default19("headers",e)),a=axios.create(r),n=[],u=[],R=[],i=[],_=[],s=function(e,r){return t[e]=r,a},l=function(e,t,r,a){return void 0===r&&(r={}),void 0===a&&(a={}),f(_default18({url:t,params:r,method:e},a))},o=function(e,t,r,a){return void 0===r&&(r=null),void 0===a&&(a={}),f(_default18({url:t,method:e,data:r},a))},f=function(e){return __awaiter(_this,void 0,void 0,function(){var r,n,i;return __generator(this,function(_){switch(_.label){case 0:if(e.headers=__assign({},t,e.headers),u.length>0&&u.forEach(function(t){return t(e)}),!(R.length>0))return[3,6];r=0,_.label=1;case 1:return r<R.length?(n=R[r](e),isPromise(n)?[4,n]:[3,3]):[3,6];case 2:return _.sent(),[3,5];case 3:return[4,n(e)];case 4:_.sent(),_.label=5;case 5:return r++,[3,1];case 6:return i=_default21(d(toNumber(new Date)),E),[2,a.request(e).then(i).catch(i)]}})})},E=function(e){return n.forEach(function(t){try{t(e)}catch(e){}}),e},d=_default6(function(e,t){return __awaiter(_this,void 0,void 0,function(){var r,a,n,u,R,s,l,o,f,E,d,N,p,T,C;return __generator(this,function(h){switch(h.label){case 0:if(r=toNumber(new Date),a=r-e,n=t instanceof Error||axios.isCancel(t),u=t,R=t,s=n?R.response:u,l=s&&s.status||null,o=n?c(t):O(l),f=in200s(l),E=t.config||null,d=s&&s.headers||null,N=s&&s.data||null,p={duration:a,problem:o,ok:f,status:l,headers:d,config:E,data:N},i.length>0&&i.forEach(function(e){return e(p)}),!(_.length>0))return[3,6];T=0,h.label=1;case 1:return T<_.length?(C=_[T](p),isPromise(C)?[4,C]:[3,3]):[3,6];case 2:return h.sent(),[3,5];case 3:return[4,C(p)];case 4:h.sent(),h.label=5;case 5:return T++,[3,1];case 6:return[2,p]}})})}),c=function(e){return"Network Error"===e.message?NETWORK_ERROR:axios.isCancel(e)?CANCEL_ERROR:_default([[_default2,function(){return O(statusNil(e.response))}],[_default22(TIMEOUT_ERROR_CODE),_default16(TIMEOUT_ERROR)],[_default22(NODEJS_CONNECTION_ERROR_CODE_NF),_default16(CONNECTION_ERROR)],[_default22(NODEJS_CONNECTION_ERROR_CODE_REF),_default16(CONNECTION_ERROR)],[_default22(NODEJS_CONNECTION_ERROR_CODE_RES),_default16(CONNECTION_ERROR)],[_default5,_default16(UNKNOWN_ERROR)]])(e.code)},O=function(e){return _default([[_default2,_default16(UNKNOWN_ERROR)],[in200s,_default16(NONE)],[in400s,_default16(CLIENT_ERROR)],[in500s,_default16(SERVER_ERROR)],[_default5,_default16(UNKNOWN_ERROR)]])(e)};return{axiosInstance:a,monitors:n,addMonitor:function(e){n.push(e)},requestTransforms:u,asyncRequestTransforms:R,responseTransforms:i,addRequestTransform:function(e){return u.push(e)},addAsyncRequestTransform:function(e){return R.push(e)},addResponseTransform:function(e){return i.push(e)},addAsyncResponseTransform:function(e){return _.push(e)},setHeader:s,setHeaders:function(e){return _default20(e).forEach(function(t){return s(t,e[t])}),a},deleteHeader:function(e){return delete t[e],a},headers:t,setBaseURL:function(e){return a.defaults.baseURL=e,a},getBaseURL:function(){return a.defaults.baseURL},get:_default23(l,["get"]),delete:_default23(l,["delete"]),head:_default23(l,["head"]),post:_default23(o,["post"]),put:_default23(o,["put"]),patch:_default23(o,["patch"]),link:_default23(l,["link"]),unlink:_default23(l,["unlink"])}},apisauce={DEFAULT_HEADERS:DEFAULT_HEADERS,NONE:NONE,CLIENT_ERROR:CLIENT_ERROR,SERVER_ERROR:SERVER_ERROR,TIMEOUT_ERROR:TIMEOUT_ERROR,CONNECTION_ERROR:CONNECTION_ERROR,NETWORK_ERROR:NETWORK_ERROR,UNKNOWN_ERROR:UNKNOWN_ERROR,create:create};exports.DEFAULT_HEADERS=DEFAULT_HEADERS,exports.NONE=NONE,exports.CLIENT_ERROR=CLIENT_ERROR,exports.SERVER_ERROR=SERVER_ERROR,exports.TIMEOUT_ERROR=TIMEOUT_ERROR,exports.CONNECTION_ERROR=CONNECTION_ERROR,exports.NETWORK_ERROR=NETWORK_ERROR,exports.UNKNOWN_ERROR=UNKNOWN_ERROR,exports.CANCEL_ERROR=CANCEL_ERROR,exports.create=create,exports.default=apisauce;
